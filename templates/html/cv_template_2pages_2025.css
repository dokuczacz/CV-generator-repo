/* ============================================================================
   CV TEMPLATE 2025 - LAYOUT RULES & PRINCIPLES
   ============================================================================

   CRITICAL: This template enforces a strict 2-page PDF constraint.

   PAGINATION APPROACH:
   - Natural flow layout (content flows continuously without explicit page breaks)
   - @page margins control padding on EVERY physical page (20mm top/bottom, ~25mm left, ~22mm right)
   - WeasyPrint automatically handles page breaks based on content overflow
   - No min-height, no explicit .page-break elements, no hardcoded "page" containers

   WHY THIS WORKS:
   - Prevents large whitespace gaps when sections don't fit on page 1
   - Allows natural breaking within sections (e.g., Work experience can split across pages)
   - Keeps content dense and uses available space efficiently
   - Eliminates the 3-page overflow problem from aggressive break-inside:avoid rules

   WHAT NOT TO DO:
   ❌ DO NOT add .page class with min-height (e.g., min-height: 277mm)
   ❌ DO NOT add explicit <div class="page-break"> elements
   ❌ DO NOT use break-inside:avoid or page-break-inside:avoid on .section
   ❌ DO NOT try to "simulate pages" with padding on .page container

   WHAT TO DO:
   ✅ Use @page margin for consistent page padding
   ✅ Use break-after:avoid on headings to keep them with following content
   ✅ Keep .page as a width/bounding container only (for screen preview)
   ✅ Let content flow naturally - trust WeasyPrint's pagination algorithm
   ✅ Test with realistic CV data (not minimal samples)

   WEASYPRINT CSS SUPPORT:
   - ✅ @page rules, margin, size
   - ✅ break-before, break-after, break-inside (use sparingly!)
   - ✅ page-break-* (legacy syntax, still supported)
   - ❌ CSS Grid (limited), Flexbox (partial - prefer simple layouts)
   - ❌ Modern features (backdrop-filter, container queries, etc.)

   See: templates/html/CV_template_2pages_2025.spec.md for detailed specification
   ============================================================================ */


:root {
  --bg: #ffffff;
  --accent: #2a2a2a; /* Section title color */
  --text: #000000;
  --muted: #666666;
  --border: #c0c0c0;
  --font-main: "Lato", "Helvetica Neue", "Arial", sans-serif;
}

/* Force consistent typography across all paginated fragments */
* {
  font-family: var(--font-main) !important;
  font-weight: 400;
  color: #000000;
}

@page {
  size: A4;
  /* Updated breathing room per v2.3 spec */
  margin: 23mm 17.25mm 23mm 17.25mm;
  font-family: "Lato", "Helvetica Neue", "Arial", sans-serif;
  font-weight: 400;
  color: #000000;
  @top-right {
    content: string(cv-header);
    font-size: 9pt;
    color: #666666;
  }
  /* Page numbering moved to inline template (language-conditional) */
}

@page :first {
  @top-right { content: none; }
}

* { box-sizing: border-box; }

html, body {
  font-family: var(--font-main);
}

body {
  margin: 0;
  padding: 0;
  background: var(--bg);
  color: var(--text);
  font-size: 10.5pt;
  line-height: 1.43; /* +10% interline spacing */
  /* Enable safe wrapping for long technical strings and prevent overflow */
  overflow-wrap: anywhere;
  word-break: normal;
  hyphens: auto;
}

/* Enforce consistent line-height/font-size across paginated fragments */
body, .page, .section, .entry, .entry-body, .entry-line, .simple-list, .bullets, .bullets li {
  line-height: 1.43 !important;
  font-size: 10.5pt !important;
}

.page {
  /* The @page margin controls padding per physical page.
     Keep .page only as a width/bounding container for screen preview. */
  width: 210mm;
  margin: 0 auto;
  background: white;
}

/* REMOVED: .page-break class (legacy)
 * The new layout uses natural flow pagination via @page margins.
 * Content flows continuously and WeasyPrint handles page breaks automatically.
 * Do NOT reintroduce explicit page break elements or min-height pagination hacks.
 */

.page {
  position: relative;
}

.header {
  position: relative;
  display: flex;
  justify-content: space-between;
  align-items: flex-start;
  margin-top: 10mm; /* Extra breathing room at top */
  padding-bottom: 4mm;
  border-bottom: 0.5pt solid var(--border);
  /* Flexbox preferred over Grid for better WeasyPrint compatibility */
}

.header-left {
  display: flex;
  flex-direction: column;
  flex: 1;
  margin-right: 6mm;  /* gap replacement for better WeasyPrint compatibility */
}

.name {
  font-size: 18pt;
  font-weight: 700;
  font-style: normal;
  color: var(--text);
  font-family: var(--font-main);
  margin: 0 0 2mm 0;
  string-set: cv-header content();
}

.contact {
  display: flex;
  flex-direction: column;
  font-size: 10pt;
  color: var(--muted);
}

.contact > * {
  margin-bottom: 2mm;  /* gap replacement */
}

.contact > *:last-child {
  margin-bottom: 0;
}

.contact-block {
  display: flex;
  flex-direction: column;
}

.contact-block > * {
  margin-bottom: 1mm;  /* gap replacement */
}

.contact-block > *:last-child {
  margin-bottom: 0;
}

a {
  color: var(--accent);
  text-decoration: underline;
}

.photo-box {
  width: 45mm;
  height: 55mm;
  flex-shrink: 0;  /* Prevent photo from shrinking in flex layout */
  background: white;
  display: flex;
  align-items: center;
  justify-content: center;
  position: relative;
  /* Subtle frame: thin border + soft shadow for depth */
  border: 0.5pt solid var(--border);
  box-shadow: 0 1pt 3pt rgba(0, 0, 0, 0.08);
}

.photo-box--empty {
  /* When there's no photo, don't waste vertical space that can force a 3rd page. */
  height: 35mm;
}

.photo-box img {
  width: 100%;
  height: 100%;
  object-fit: cover;
}

.content {
  padding-top: 0;
  padding-bottom: 15mm; /* reserve footer space */
}

.section {
  margin-top: 5mm; /* ~14pt per spec */
  /* Deterministic section keep-together: prevent small sections from splitting */
  break-inside: avoid;
  page-break-inside: avoid;
  margin-bottom: 14pt;
}

.section-title {
  font-size: 12pt;
  font-weight: 600;
  font-variant: small-caps;
  letter-spacing: 0.3px;
  margin: 0 0 2mm 0;
  color: var(--accent);
  display: flex;
  align-items: center;
  gap: 6mm;
  /* Keep section title with the first following block when possible */
  break-after: avoid;
  page-break-after: avoid;
}

.section-title::after {
  content: "";
  flex: 1;
  border-bottom: 0.5pt solid #c0c0c0;
}

.entry {
  margin-bottom: 2mm;
  /* Allow entries to split across pages if needed; avoid rules here can create
     large whitespace and push content to a 3rd page. Keep the header with the
     next line instead (see .entry-head). */
}

.entry-head {
  display: flex;
  align-items: baseline;
  font-weight: 400;
  /* Prefer keeping the entry header with at least the next line/bullets */
  break-after: avoid;
  page-break-after: avoid;
}

.entry-head > .entry-date {
  width: 42.5mm;
  margin-right: 3mm;  /* column-gap replacement */
  flex-shrink: 0;
}

.entry-head > .entry-title {
  flex: 1;
}

.entry-title {
  font-weight: 700;
  font-size: inherit;
}

.further-exp-title {
  font-weight: 400;
  font-size: inherit;
}


.entry-body {
  margin-left: 42.5mm;
  margin-top: 0.8mm;
}

.entry-line {
  margin-bottom: 0.6mm;
}

.bullets {
  margin: 0.8mm 0 0 42.5mm;
  padding-left: 4mm;
  font-size: 10pt;
  line-height: 1.4;
  list-style: disc;
  list-style-position: outside;
}

.bullets li {
  margin-bottom: 0.3mm;
  line-height: 1.4;
  overflow-wrap: anywhere;
  word-break: normal;
  hyphens: auto;
}

.simple-list {
  margin: 0;
  padding-left: 0;
  list-style: none;
  font-size: 10.5pt;
  line-height: 1.43;
}

.simple-list li {
  margin-bottom: 0.7mm;
  line-height: 1.25;
  overflow-wrap: anywhere;
  word-break: normal;
  hyphens: auto;
}

.footer {
  position: absolute;
  left: 0;
  right: 0;
  bottom: 0;
  display: flex;
  justify-content: space-between;
  gap: 6mm;
  font-size: 9pt;
  color: var(--muted);
}

.small { font-size: inherit; line-height: 1.25; }

.two-col-list {
  display: flex;
  flex-direction: column;
}

.two-col-list > * {
  margin-bottom: 0.6mm;  /* gap replacement */
}

.two-col-list > *:last-child {
  margin-bottom: 0;
}

.two-col-row {
  display: flex;
}

.two-col-row > div:first-child {
  width: 42.5mm;
  margin-right: 3mm;  /* column-gap replacement */
  flex-shrink: 0;
}

.two-col-row > div:last-child {
  flex: 1;
}

